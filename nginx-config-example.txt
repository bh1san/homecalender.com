# This is an example Nginx configuration file for your Next.js application.
# You would typically save a file like this on your DigitalOcean server at:
# /etc/nginx/sites-available/homecalender.com
#
# Then, you would create a symbolic link to it in the sites-enabled directory:
# sudo ln -s /etc/nginx/sites-available/homecalender.com /etc/nginx/sites-enabled/
#
# Finally, test the configuration and reload Nginx:
# sudo nginx -t
# sudo systemctl reload nginx

server {
    # Listen on port 80 for http traffic.
    # The 'listen [::]:80;' line is for IPv6.
    listen 80;
    listen [::]:80;

    # Replace 'homecalender.com' with your actual domain name.
    server_name homecalender.com www.homecalender.com;

    # This block handles the reverse proxy. It passes requests to your
    # Next.js application, which you have running on port 3000 with pm2.
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
